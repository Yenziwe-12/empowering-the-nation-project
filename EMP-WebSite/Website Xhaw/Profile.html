<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Profile | Empowering The Nation</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/stylesheet.css"
 
</head>
<body>

  <nav>
    <div class="brand">
      <img src="Media1/Emplogo.png" alt="Empowering the nation logo">
      <h1>Empowering The Nation</h1>
    </div>
    <div class="profile-icon" id="profileIcon" onclick="openNav()">
      <img src="Media1/user.png" alt="Profile">
    </div>
  </nav>

  <div id="sideNav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="profile.html">My Profile</a>
    <a href="#" onclick="alert('Functionality to change password coming soon.')">Security Settings</a>
    <a href="#" onclick="logout()">Logout</a>
  </div>

  <div class="profile-container">

    <div class="card">
        <div class="profile-header">
            <img src="Media1/Yenzi.jpg" alt="User Avatar" class="avatar-large" id="profileAvatar">
            <div class="user-info">
                <h3 id="profileNameDisplay">Hello, Student!</h3>
                <p>Welcome to your personal account management area.</p>
            </div>
        </div>

        <h2>‚öôÔ∏è Account Details</h2>
        <div class="detail-grid">
            <strong>Username:</strong>
            <span id="settingsUsername">Not set</span>
        </div>
        <div class="detail-grid">
            <strong>Email:</strong>
            <span id="settingsEmail">Not set</span>
        </div>
        <div class="detail-grid">
            <strong>Membership Status:</strong>
            <span>Active Student</span>
        </div>
        <div class="detail-grid">
            <strong>Last Login:</strong>
            <span id="lastLoginDate">Calculating...</span>
        </div>

        <div class="action-group">
            <a href="#" class="btn btn-primary" onclick="alert('Placeholder for Edit Profile form.')">Edit Profile</a>
            <button class="btn btn-secondary" onclick="logout()">Logout of Account</button>
        </div>
    </div>

    <div class="card">
        <h2>üìö My Learning Hub</h2>
        <div class="action-group">
            <a href="dashboard.html" class="btn btn-primary">Go to Dashboard</a>
            <a href="Courses.html" class="btn btn-secondary">View All Courses</a>
        </div>
    </div>

  </div>

  <script>
    // -------------------
    // Sidebar Navigation Logic
    // -------------------
    function openNav() { document.getElementById("sideNav").style.width = "250px"; }
    function closeNav() { document.getElementById("sideNav").style.width = "0"; }

    // -------------------
    // Data Loading and Display
    // -------------------
    window.onload = function() {
      // 1. Check if user is logged in (using localStorage data)
      const username = localStorage.getItem("username") || "Student";
      const email = localStorage.getItem("email") || "student@example.com";
      
      if(username !== "Student") { // If we have a set username
        document.getElementById("profileIcon").style.display = "block";
      }

      // 2. Populate profile fields
      document.getElementById("profileNameDisplay").textContent = `Hello, ${username}!`;
      document.getElementById("settingsUsername").textContent = username;
      document.getElementById("settingsEmail").textContent = email;

      // 3. Last Login Date 
      document.getElementById("lastLoginDate").textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' });
    }

    // -------------------
    // Logout Functionality
    // -------------------
    function logout() {
      if(confirm("Are you sure you want to log out?")) {
        localStorage.removeItem("username");
        localStorage.removeItem("email");
        alert("You have been successfully logged out!");
        // Redirect to a non-authenticated page, like the home page
        window.location.href = "home.html"; 
      }
    }
  </script>
</body>
</html>